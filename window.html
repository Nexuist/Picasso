<!DOCTYPE html>
<html>
<head>
	<link rel = "stylesheet" href = "https://opensource.keycdn.com/fontawesome/4.7.0/font-awesome.min.css " type = "text/css" />
	<link rel = "stylesheet" href = "http://cdnjs.cloudflare.com/ajax/libs/bulma/0.3.1/css/bulma.min.css" type = "text/css" />
	<link rel = "stylesheet" href = "window.css" />
	<script src="https://unpkg.com/vue@2.0.0/dist/vue.js"></script>
	<script src = "window.js" defer></script>
</head>
<body>
	<div id = "root">
		<!-- Upload Screen -->
		<transition name = "fade" appear>
			<div class = "hero is-fullheight is-light" id = "uploadScreen" v-if = "screen == 'upload'" key = "upload">
				<div class = "hero-body">
					<div class = "container has-text-centered">
						<h1 class = "title">Drag in a folder.</h1>
						<a v-on:click = "chooseFolderPressed" class = "button is-dark is-outlined">
							<span class = "icon">
								<i class = "fa fa-folder-open"></i>
							</span>
							<span>Or, choose a folder</span>
						</a>
						<h5>{{uploadLabel}}</h5>
						<br/>
					</div>
				</div>
			</div>
		</transition>
		<!-- Main Screen -->
		<!-- tabindex is needed to make the keyboard shortcuts work correctly -->
		<transition name = "fade" appear>
		<div id = "mainScreen" v-if = "screen == 'main'" key = "main" 
			v-on:keyup.left = "changeImage(-1)" 
			v-on:keyup.a = "changeImage(-1)"
			v-on:keyup.right = "changeImage(1)" 
			v-on:keyup.d = "changeImage(1)"
			v-on:keyup.x = "trash()"
			v-on:keyup.z = "imageZoomed = !imageZoomed"
			tabindex = "-1"
		>
			<!-- Image -->
			<img :class = "{ 'fitted': !imageZoomed, 'zoomed': imageZoomed }" v-if = "currentImage" :src = "currentImage.fileURL" onload = "root.toolbarEnabled = true" /> 
			<!-- Toolbar -->
			<nav class = "nav">
				<!-- Metadata -->
				<div class = "nav-left" v-if = "toolbarEnabled">
					<a class = "nav-item">{{currentImage.name}}</a>
					<a class = "nav-item">{{currentImage.width}}x{{currentImage.height}}</a>
					<a class = "nav-item">{{currentImage.size}}MB</a>
					<a class = "nav-item">
						{{index + 1}}/{{images.length}}
					</a>
				</div>
				<div class = "nav-left" v-else>
					<a class = "nav-item"><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i>  Scanning...</a>
				</div>
				<!-- Buttons -->
				<!-- is-active to keep visible on mobile -->
				<div class = "nav-right is-active">
					<span class = "nav-item">
						<btn icon = "external-link" :disabled = "!toolbarEnabled"></btn>
						<btn icon = "search-plus" v-on:click.native = "imageZoomed = !imageZoomed" class = "is-warning" :disabled = "!toolbarEnabled"></btn>
						<btn icon = "folder" class = "is-primary" :disabled = "!toolbarEnabled"></btn>
						<btn icon = "trash" class = "is-danger" v-on:click.native = "trash()" :disabled = "!toolbarEnabled"></btn>
						<btn icon = "chevron-circle-left" v-on:click.native = "changeImage(-1)" :disabled = "!toolbarEnabled"></btn>
						<btn icon = "chevron-circle-right" v-on:click.native = "changeImage(1)" :disabled = "!toolbarEnabled"></btn>
					</span>
				</div>
			</nav>
		</div>	
	</transition>
</div>
</body>
</html>
